#!/bin/bash
#
#------------------------------------------------------------------------------
## DESCRIPTION
#------------------------------------------------------------------------------
# Allows you to quickly setup a server to be used as a SOCKS proxy by forwarding
# SSH ports
#
#------------------------------------------------------------------------------
## USAGE
#------------------------------------------------------------------------------
# Host = 127.0.0.1
# Port = 2434 (in this case)
# Set it as a SOCKSv5 Proxy
#==============================================================================


# ==============================================================================
# Create key pair
# ==============================================================================
ssh-copy-id root@123.456.789


# ==============================================================================
#  Setup SSH tunnet for SOCKS
# ==============================================================================
#   D - port of choice between 1025 and 65536
#   f - run tunnel in background
#   C - compress data
#   q - quiet mode
#   N - no commands are to be executed remotely
ssh -D 2434 -f -C -q -N root@123.456.789


# ==============================================================================
# Test if the tunnel is active
# ==============================================================================
ps aux | grep ssh | grep 2434

# Example output:
#
# test 617 0.0 0.0 49348 2384 ? Ss 10:11 0:00 ssh -D 2434 -f -C -q -N root@1.2.3.4


# ==============================================================================
# Usage
# ==============================================================================
# Host = 127.0.0.1
# Port = 2434 (in this case)
# Set it as a SOCKSv5 Proxy